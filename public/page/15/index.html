<!DOCTYPE html>
<html lang="en">
<head>
	<meta name="generator" content="Hugo 0.144.2"><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <link rel="stylesheet" href="/assets/css/style.css" />
  <script src="https://kit.fontawesome.com/f4170b83c1.js" crossorigin="anonymous"></script>

  <link rel="me" href="https://github.com/gr36" />
  <link rel="me" href="https://instagram.com/_greg_morris" />
  <link rel="me" href="https://gregmorris.co.uk">
  <meta property="og:description" content="Follow &lt;a href=&#34;https://micro.blog/gregmorris&#34;&gt;@gregmorris on Micro.blog&lt;/a&gt;." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/" />
<meta name=”twitter:card” content=”summary” /> 


<meta property="og:image" content="https://gregmorris.co.uk/uploads/2024/1.png" />








<meta property="og:updated_time" content="2025-01-03T12:17:31&#43;00:00"/>










  <title>Greg Morris</title>
  

<link rel="alternate" href="http://localhost:1313/feed.xml" type="application/rss+xml" title="Greg Morris">
<link rel="alternate" href="http://localhost:1313/feed.json" type="application/json" title="Greg Morris">









<link rel="EditURI" type="application/rsd+xml" href="http://localhost:1313/rsd.xml">
<link rel="authorization_endpoint" href="https://micro.blog/indieauth/auth">
<link rel="token_endpoint" href="https://micro.blog/indieauth/token">
<link rel="subscribe" href="https://micro.blog/users/follow">
<link rel="webmention" href="https://micro.blog/webmention">
<link rel="micropub" href="https://micro.blog/micropub">
<link rel="microsub" href="https://micro.blog/microsub">

<link rel="stylesheet" href="/custom.css?1735590388">


  <link rel="stylesheet" href="/css/bookgoals.css?1736075796">



  
<script type="module">
  const base64Decode = (text) => decodeURIComponent(atob(text));

  document.addEventListener('click', e => {
    const link = e.target.closest('a.reply-by-email');

    if (link) {
      e.preventDefault();
      window.location = base64Decode(link.dataset.meta.match(/.{2}/g).map(hex => String.fromCharCode(parseInt(hex, 16) ^ 0x24)).join(''));
    }
  });
  </script>


</head>

<body>
<div class="header flow">
    <svg role="img" aria-label="Greg Morris" viewBox="0 0 420.84 64.11" xmlns="http://www.w3.org/2000/svg">
    <defs>
    <style>
        .cls-1 {
            fill: #231f20;
        }
        @media (prefers-color-scheme: dark) {
            .cls-1 {
                fill: white;
            }
        }
    </style>
    </defs>
    <g data-name="Layer 1">
    <path class="cls-1" d="M0,27.45v-.14C0,13.01,11.14,1.3,26.37,1.3c8.99,0,14.59,2.44,19.76,6.9l-6.97,8.41c-3.81-3.23-7.4-5.1-13.15-5.1-8.05,0-14.44,7.12-14.44,15.67v.14c0,9.2,6.33,15.95,15.24,15.95,4.1,0,7.62-1.01,10.42-3.02v-7.19h-11.14v-9.56h21.85v21.85c-5.17,4.39-12.29,7.98-21.49,7.98C10.78,53.33,0,42.4,0,27.45Z"/>
    <path class="cls-1" d="M57.45,13.94h10.93v7.76c2.23-5.25,5.75-8.77,12.29-8.48v11.43h-.58c-7.26,0-11.71,4.31-11.71,13.58v14.23h-10.93V13.94Z"/>
    <path class="cls-1" d="M84.56,33.42v-.14c0-11,7.83-20.05,19.04-20.05,12.86,0,18.76,9.99,18.76,20.91,0,.86-.07,1.8-.15,2.87h-26.8c1.08,4.96,4.53,7.55,9.41,7.55,3.67,0,6.25-1.15,9.34-3.95l6.25,5.53c-3.66,4.53-8.77,7.19-15.74,7.19-11.57,0-20.12-8.12-20.12-19.91ZM111.72,30.19c-.65-4.89-3.52-8.19-8.12-8.19s-7.48,3.23-8.34,8.19h16.46Z"/>
    <path class="cls-1" d="M130.72,60.08l3.74-8.19c4.03,2.23,7.84,3.52,13.01,3.52,7.47,0,11-3.59,11-10.49v-1.87c-3.23,3.95-6.76,6.25-12.58,6.25-8.99,0-17.1-6.47-17.1-17.96v-.14c0-11.5,8.26-17.97,17.1-17.97,5.96,0,9.49,2.52,12.43,5.75v-5.03h10.92v29.83c0,6.83-1.65,11.93-4.89,15.16-3.66,3.66-9.13,5.17-16.6,5.17-6.32,0-12.15-1.44-17.03-4.02ZM158.46,31.34v-.14c0-5.25-4.02-8.91-9.42-8.91s-9.34,3.66-9.34,8.91v.14c0,5.39,3.95,8.91,9.34,8.91s9.42-3.66,9.42-8.91Z"/>
    <path class="cls-1" d="M201.76,2.16h11.93l13.22,21.27,13.22-21.27h11.93v50.31h-11V19.62l-14.16,21.49h-.29l-14.01-21.27v32.63h-10.85V2.16Z"/>
    <path class="cls-1" d="m261.16 33.42v-0.14c0-11.07 8.91-20.05 20.91-20.05s20.77 8.77 20.77 19.91v0.14c0 11.07-8.91 20.05-20.91 20.05s-20.77-8.77-20.77-19.91zm30.9 0v-0.14c0-5.68-4.1-10.64-10.13-10.64s-9.99 4.74-9.99 10.49v0.14c0 5.68 4.1 10.64 10.13 10.64s9.99-4.74 9.99-10.49z"/>
    <path class="cls-1" d="M310.77,13.94h10.93v7.76c2.23-5.25,5.75-8.77,12.29-8.48v11.43h-.58c-7.26,0-11.71,4.31-11.71,13.58v14.23h-10.93V13.94Z"/>
    <path class="cls-1" d="M340.82,13.94h10.93v7.76c2.23-5.25,5.75-8.77,12.29-8.48v11.43h-.58c-7.26,0-11.71,4.31-11.71,13.58v14.23h-10.93V13.94Z"/>
    <path class="cls-1" d="M371.1,0h11.5v9.7h-11.5V0ZM371.38,13.94h10.93v38.52h-10.93V13.94Z"/>
    <path class="cls-1" d="M389.58,47.36l4.67-7.19c4.24,3.09,8.48,4.6,12.15,4.6,3.16,0,4.6-1.15,4.6-2.88v-.14c0-2.37-3.74-3.09-7.98-4.46-5.39-1.51-11.5-4.1-11.5-11.57v-.14c0-7.84,6.32-12.22,14.09-12.22,4.89,0,10.13,1.65,14.37,4.46l-4.17,7.55c-3.81-2.23-7.62-3.59-10.42-3.59-2.66,0-4.02,1.15-4.02,2.66v.14c0,2.01,3.67,3.31,7.83,4.6,5.39,1.72,11.64,4.38,11.64,11.43v.14c0,8.55-6.4,12.43-14.73,12.43-5.46,0-11.36-1.8-16.53-5.82Z"/>
    </g>
    </svg>
    <div class="repel flex">
        <div class="subtitle">
        Designer, Pretend Photographer, <span>Dad</span>
        </div>
        <div class="follow_links flex">
            <a aria-label="micro.blog" href="https://micro.blog/gregmorris/"><i class="fa-brands fa-microblog"></i></a>
            <a aria-label="bluesky" href="https://bsky.app/profile/gr36.com"><i class="fa-brands fa-bluesky"></i></a>
            <a aria-label="mastodon" href="https://social.lol/@gr36"><i class="fa-brands fa-mastodon"></i></a>
            <a aria-label="buy me a coffee" href="https://www.buymeacoffee.com/gregmorris"><i class="fa-solid fa-mug-saucer"></i></a>
        </div>

    </div>

</div>

<nav>
    <ul>
        <li  class="active" >
            <a href="/">Home</a>
        </li>
        
        
        <li >
            <a href="/podcast/">Podcast</a>
        </li>
        
        <li >
            <a href="/photos/">Photos</a>
        </li>
        
        <li >
            <a href="/reading/">Reading</a>
        </li>
        
        <li >
            <a href="/about/">About Me</a>
        </li>
        
    </ul>
</nav>












<section class="blog-posts">
    <ul class="post-list flow">
    
    
        
        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/25/displaying-limited-number.html"><h1 class="p-name">Displaying Limited Number Of Posts In 11ty</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>Another day, another tweak I&rsquo;m making to my blog. Today&rsquo;s task, alongside <a href="https://social.lol/@gr36/111988050307279780">sorting out the navigation</a>  to display better, was adding some content to my <a href="/tags/posts/">Posts page</a>. On my old blog, this page listed all the tags I have and a few examples of the posts found in them, so I set about doing exactly that.</p>
<p><img src="https://greg-morris.micro.blog/uploads/2024/fe58829c7a.jpg" alt="Screenshot of my blog displaying the first 5 posts in my reviews collection"></p>
<h2 id="add-a-filter">Add A Filter</h2>
<p>After attempting to write my own code to pull out the latest five posts from a specific tag, I stumbled across <a href="https://mxb.dev/">Max Böck</a> Github repo with an example of <a href="https://github.com/maxboeck/eleventy-webmentions">how to display webmentions</a>. This filter allowed passing a collection to it and also customizing the number of posts to display. The filter is as follows:</p>
<pre tabindex="0"><code>// Get the first n elements of a collection.
  eleventyConfig.addFilter(&#39;head&#39;, (array, n) =&gt; {
    if (n &lt; 0) {
      return array.slice(n)
    }

    return array.slice(0, n)
  })
</code></pre><h2 id="displaying-on-page">Displaying On Page</h2>
<p>This made my job much easier, and the filter could potentially be reusable in other situations. For the time being, I chose to display the three most-used tags until I can clean up my imported posts from my old blog and integrate others than using for. As an example, to show the first 5 posts in my Reviews Collection, I use <code>{% raw %}{% for post in collections.Review | head(-5) %}{% endraw %}</code>.</p>
<p>I use <code>head(-5)</code> in the filter to get the latest 5 posts, whereas <code>head(5)</code> would get the first 5 from the collection, i.e., the oldest posts. Once I have cleaned up my posts, I plan to display all collections here and make the code cleaner rather than repeating it three times. But as a stopgap while I do this, I am pretty happy with how it turned out.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-25 08:38:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  25 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/24/more-people-should.html"><h1 class="p-name">More People Should Write</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>James Somers <a href="https://jsomers.net/blog/more-people-should-write">encouraging more people to write</a>:</p>
<blockquote>
<p>More people should do what I’m doing right now. They should sit at their computers and bat the cursor around — write full sentences about themselves and the things they care about.</p></blockquote>
<p>This is an old post, and reminiscent of many newer versions I have linked to but it captures what I experience perfectly. When I am motivated to write, and that doesn’t come easily, the world seems different. As James says about himself — I feel curious about things, with a desire to form thoughts and ideas about myself.</p>
<p>It doesn’t need to be great writing, I mean look at the state of my posts, you just need to do it. Let me know the things you are doing and what you find interesting. Set free your inner weirdness and display your motivations. Just write and the world will be right.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-24 21:25:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  24 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/24/a-few-shot.html"><h1 class="p-name">A Few Shot From My Morning Walk</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>Really early on a Sunday morning, and with sore legs from a long run the day before I took my Richo GRiiix out in Grantham to see what I could find. The answer was not a lot, but I loved the cold air but nice low sunshine. This is where my street photography excels.</p>
<div class="gallery">
<img alt="a man walking out of a shadow surrounded by closed down shops" src="https://greg-morris.micro.blog/uploads/2024/3ff6ab3c26.jpg">
<img alt="some weird church thing, with a nice shadow" src="https://greg-morris.micro.blog/uploads/2024/1c32cc8338.jpg">
<img alt="a man crossing the road been two shadows through a tunnel of light" src="https://greg-morris.micro.blog/uploads/2024/b2a68a8e57.jpg">
<img alt="a lamppost casting a shadow onto a wall that had a lamppost mounted to it" src="https://greg-morris.micro.blog/uploads/2024/c860ff47a2.jpg">
<img alt="a church in the sunshine" src="https://greg-morris.micro.blog/uploads/2024/11bab0ae57.jpg">
<img alt="a rose left in wet grass to rot" src="https://greg-morris.micro.blog/uploads/2024/82408cb157.jpg">
<img alt="a plane flying high above a church steeple leaving a jet trail" src="https://greg-morris.micro.blog/uploads/2024/318084cb69.jpg">
<img alt="an lgbtq flag saying high in the sunshine" src="https://greg-morris.micro.blog/uploads/2024/4e7d9ecb2b.jpg">
</div>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-24 00:00:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  24 Feb 2024</time>
    
    <div>
    
      <a href="/categories/photos"><i class="fa-solid fa-tag"></i>  Photos </a>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/20/making-a-blogroll.html"><h1 class="p-name">Making a Blogroll</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>One of the great things about making your own website is that you can build new things. One of the worst things about making your own website is that you keep building new things. After web mentions and a way to publish easily, the next thing on my list was a blogroll. Not just a page people can go to, but a way to surface the things I like to everyone who happens to visit my website.</p>
<p>Thankfully, this was easy, and I took inspiration from Chris Hannah&rsquo;s <a href="https://github.com/chrishannah/blogroll.js">blogroll on GitHub</a>. Starting with creating two JSON files with information on the blogs I enjoy reading, and the products I like and would recommend to people.</p>
<p><img src="https://greg-morris.micro.blog/uploads/2024/5028cac5d7.jpg" alt="My blogroll design, it&rsquo;s just two squares with a random blog I like in one, and a product I like in another"></p>
<p>After creating the files, I added an Eleventy filter to generate a random number in order to pick a blog and product at random for each place this would appear. It was important to me that it cycle through as many as possible, but it was not browser-intensive, and my blog continued to serve static pages.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">eleventyConfig</span>.<span style="color:#a6e22e">addFilter</span>(<span style="color:#e6db74">&#34;randomItem&#34;</span>, (<span style="color:#a6e22e">arr</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">arr</span>.<span style="color:#a6e22e">sort</span>(() =&gt; {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0.5</span> <span style="color:#f92672">-</span> Math.<span style="color:#a6e22e">random</span>();
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">arr</span>.<span style="color:#a6e22e">slice</span>(<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">dir</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">input</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;src&#34;</span>,
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">output</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;public&#34;</span>,
</span></span><span style="display:flex;"><span>      },
</span></span><span style="display:flex;"><span>    };
</span></span></code></pre></div><p>Then I can show them wherever I wish using <code>{% raw %}{% for blog in blogroll | randomItem %}{% endraw %}</code>. The best place for this is a partial, and at the moment it lies at the end of each blog post. However, I have plans to improve the design and be able to place it in more spaces.</p>
<p>I have a few things in the JSON files at the moment, but I have a feeling this will grow quickly</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-20 11:15:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  20 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/20/not-really-webmentions.html"><h1 class="p-name">Not Really Webmentions Part 2</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>In keeping with my ways, as soon as I published my rather long-winded <a href="/2024/02/18/my-blog-webmention-counts">method of pulling in pseudo webmentions</a>, I knew I wasn’t satisfied. Functioning is one thing, but seeing all the code on a page and having trouble following it myself gave me a headache. I began working on updates I had planned for a few weeks later.</p>
<p>I am now just using the Mastodon API to pull in all the information I want to display.</p>
<pre tabindex="0"><code>async function fetchAndUpdateUserPosts(instanceURL, accessToken, username) {
  try {
    const fetchedPosts = await fetchUserPosts(instanceURL, accessToken, username);
    const filePath = `./_cache/mastodon_posts.json`;

    // Check if the file exists
    if (fs.existsSync(filePath)) {
      // Read existing posts from file
      const existingPosts = JSON.parse(fs.readFileSync(filePath, &#39;utf-8&#39;));

      // Update or add new posts
      fetchedPosts.forEach(newPost =&gt; {
        const index = existingPosts.findIndex(oldPost =&gt; oldPost.id === newPost.id);
        if (index !== -1) {
          // Update existing post
          existingPosts[index] = newPost;
        } else {
          // Add new post
          existingPosts.push(newPost);
        }
      });

      // Write updated posts back to the file
      fs.writeFileSync(filePath, JSON.stringify(existingPosts, null, 2));
      console.log(`Posts for user ${username} fetched and updated successfully.`);
    } else {
      // Write fetched posts to a new file
      fs.writeFileSync(filePath, JSON.stringify(fetchedPosts, null, 2));
      console.log(`Posts for user ${username} fetched and saved successfully.`);
    }
  } catch (error) {
    console.error(&#39;Error:&#39;, error);
  }
}
</code></pre><p>Full gist <a href="https://gist.github.com/gr36/bbddf18a17ce903e8b2dc321d96e1801">here</a>.</p>
<p>For this, you will need an access token for the API, which is available in your settings - more info here. You will also need a username, which isn’t your actual username but more of an ID. More information on how to get this is available here.</p>
<p>The full script checks for changes to the cached file and only updates changes, which is handy for adding new comments, likes, or when you edit your post.</p>
<h2 id="displaying-information">Displaying Information</h2>
<p>This method makes displaying the information much easier, as the old way was a complete mess. It illustrates the learning process here!</p>
<p>Now I just need <code>{% raw %}{% set mastoContent = mastodon | searchContentForUrl(page.url | url | absoluteUrl(metadata.url)) %}{% endraw %}</code> so in my post I can then display the toot content, likes, boosts and a comment count. For instance my toot data is:</p>
<pre tabindex="0"><code>{% raw %}
&lt;div&gt;&lt;i class=&#34;fa-regular fa-star&#34;&gt;&lt;/i&gt; {{ mastoContent.favourites_count}}&lt;/div&gt;
&lt;div&gt;&lt;i class=&#34;fa-regular fa-comment&#34;&gt;&lt;/i&gt; {{ mastoContent.replies_count}}&lt;/div&gt;
&lt;div&gt;&lt;i class=&#34;fa-solid fa-rocket&#34;&gt;&lt;/i&gt; {{ mastoContent.reblogs_count}}&lt;/div&gt;
{% endraw %}
</code></pre><h2 id="future-plans">Future Plans</h2>
<p>This new approach, although much cleaner, disregards webmentions from any source other than Mastodon. I am still pulling these in but displaying them on a private dashboard in my CMS. My plans are to filter out Mastodon-related ones and display these on the post page as well. This will take me a while to figure out the best way to show them, and at this point, I will pull in all old data from my old blog.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-20 08:22:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  20 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/19/varied-writing-needed.html"><h1 class="p-name">Varied Writing Needed</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>I&rsquo;ve been struggling to write about much else besides writing. Sure, it&rsquo;s occupying much of my time right now, but it isn&rsquo;t a subject I typically cover. This isn&rsquo;t a &lsquo;worry&rsquo;, but a post I read earlier highlighted factors that might be affecting my slump.</p>
<p>A post on the Meadow blog, about reading <a href="https://meadow.bearblog.dev/follow-widely-to-write-widely/">lots of blogs to be able to write widely</a>, states:</p>
<blockquote>
<p>There are no real guidelines on how to create posts. There are no expectations you need to fulfill, no boxes you need to check. There&rsquo;s nothing you have to do besides doing whatever you want.</p></blockquote>
<p>This simple statement is easy to forget. I still worry about <a href="/2023/12/14/the-way-i.html">the way I format my blog posts</a> and what to write about, but ultimately it doesn&rsquo;t matter. These meta posts are fine, because anything is fine. There&rsquo;s no pressure to have a &rsquo;thing&rsquo;, and people seem to read them anyway. So, insert shrug emoji?</p>
<p>I&rsquo;m 100% on board with the comments about the need to read a lot to write more. My usual inspiration for posts comes from the things I consume. Occasionally podcasts and TV shows, but nothing seems to prod my inspiration as much as reading books and blog posts. Something that generally falls away once I become busy.</p>
<p>By returning to the things I enjoy, it sparks the creativity to do other things I enjoy, and everything becomes right with the world again.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-19 00:00:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  19 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/18/my-blog-webmention.html"><h1 class="p-name">My Blog Webmention Counts</h1></a>
    
  </div>
  <section class="e-content post-body">
      <hr>
<p>This week I have been building parts of my blog, to learn and to get it to a point that I am happy with. A large part of this was webmentions, and thanks to a few <a href="https://mxb.dev/blog/using-webmentions-on-static-sites/">excellent</a> <a href="https://equk.co.uk/2023/07/18/adding-webmentions-in-eleventy/">guides</a> I got 90% of the the way their. With only a few design things to think through I read <a href="https://campegg.com/2024/02/11/over-the-last.html">more</a> <a href="https://rknight.me/blog/webmentions-redux/">posts</a> on webmentions and realised the way I was doing it was the best solution for privacy and so here we are with a reduced version.</p>
<p>I need to preface this with the fact I am a noob, and this might be a) wrong or b) a stupid way of doing it. This is just the way I did it, and if you’ve got some advice I am all ears.</p>
<h2 id="webmentions">Webmentions</h2>
<p>I had already implemented a script to pull these from webmention.io and cache these into a local file.</p>
<pre tabindex="0"><code>  // Import required modules
  const fetch = require(&#39;node-fetch&#39;);
  const fs = require(&#39;fs&#39;);
  const path = require(&#39;path&#39;);
  require(&#39;dotenv&#39;).config();

  // Constants
  const CACHE_DIR = &#39;./_cache&#39;;
  const API_ORIGIN = &#39;https://webmention.io/api/mentions.jf2&#39;;
  const TOKEN = process.env.WEBMENTION_IO_TOKEN;

  // Ensure cache directory exists
  if (!fs.existsSync(CACHE_DIR)) {
      fs.mkdirSync(CACHE_DIR);
  }

  // Function to fetch data from the API
  async function fetchData() {
      try {
          const response = await fetch(`${API_ORIGIN}?token=${TOKEN}`);
          if (!response.ok) {
              throw new Error(`Failed to fetch data: ${response.status} ${response.statusText}`);
          }
          const data = await response.json();
          return data;
      } catch (error) {
          console.error(&#39;Error fetching data:&#39;, error.message);
          throw error;
      }
  }

  // Function to save data to JSON file
  function saveDataToFile(data) {
      try {
          const filePath = path.join(CACHE_DIR, &#39;webmentions.json&#39;);
          fs.writeFileSync(filePath, JSON.stringify(data, null, 2));
          console.log(&#39;Data saved to:&#39;, filePath);
      } catch (error) {
          console.error(&#39;Error saving data to file:&#39;, error.message);
          throw error;
      }
  }

  // Main function to fetch data and save it to file
  async function main() {
      try {
          const data = await fetchData();
          saveDataToFile(data);
      } catch (error) {
          console.error(&#39;An error occurred:&#39;, error.message);
          process.exit(1);
      }
  }

  // Run main function
  main();
</code></pre><p>Instead of loading all of the information from this as most guides do, I decided instead to simply count the important details. I think this could be cleaner but its working as thats all I am working on at the moment.</p>
<pre tabindex="0"><code>{% raw %}
const filteredWebmentions = data.children.filter(entry =&gt; {
      return entry[&#39;like-of&#39;] === url || entry[&#39;in-reply-to&#39;] === url || entry[&#39;repost-of&#39;] === url;
    });

    // Initialize counts for each type
    let likeCount = 0;
    let replyCount = 0;
    let repostCount = 0;

    // Loop through each entry in the filtered webmentions
    filteredWebmentions.forEach(entry =&gt; {
      // Check if the entry matches the given URL for like, reply, or repost
      if (entry[&#39;like-of&#39;] === url) {
        likeCount++;
      }
      if (entry[&#39;in-reply-to&#39;] === url) {
        replyCount++;
      }
      if (entry[&#39;repost-of&#39;] === url) {
        repostCount++;
      }
    });

    // Return an object containing the counts
    return {
      likeCount,
      replyCount,
      repostCount
    };
{% endraw %}
</code></pre><p>This is then displayed on my post using:</p>
<pre tabindex="0"><code>{% raw %}
{% set urlnohtml = page.url | url | absoluteUrl(metadata.url) | replace(&#39;.html&#39;, &#39;&#39;) %}
{% set urlhtml = page.url | url | absoluteUrl(metadata.url) %}
{% set countnohtml = webmentionsFilePath | countWebmentions(urlnohtml) %}
{% set counthtml = webmentionsFilePath | countWebmentions(urlhtml) %}
{% set totallikes = countnohtml.likeCount + counthtml.likeCount %}
{% set totalreplies = countnohtml.replyCount + counthtml.replyCount %}
{% set totalrepost = countnohtml.repostCount + counthtml.repostCount %}
{% endraw %}
</code></pre><p>This is not very effect as I ran into an issue where i had shared some links with <code>.html</code> on the end and some without, so got an MVP working late last night.</p>
<p><img src="https://greg-morris.micro.blog/uploads/2024/6c7d3fa5a0.jpg" alt=""></p>
<h2 id="mastodon-information">Mastodon Information</h2>
<p>I could then link people to the resulting Mastodon post but decided I wanted to go further and display the information from the toot.</p>
<p>The easy way would have been to rely on the embed code and link to the toot, but I decided instead to make as many things static as possible. Deciding instead to pull the rss feed from my account and filter it by the page url.</p>
<pre tabindex="0"><code>{% raw %}
const axios = require(&#39;axios&#39;);
const Parser = require(&#39;rss-parser&#39;);
const fs = require(&#39;fs&#39;);

const rssFeedUrl = &#39;https://social.lol/@gr36.rss&#39;;
const jsonFilePath = &#39;./_cache/mastodon.json&#39;;

// Function to read the previously saved entries from the JSON file
const readSavedEntries = () =&gt; {
  try {
    const jsonData = fs.readFileSync(jsonFilePath, &#39;utf8&#39;);
    return JSON.parse(jsonData).map(entry =&gt; entry.link);
  } catch (error) {
    // If the file doesn&#39;t exist or is empty, return an empty array
    return [];
  }
};

axios.get(rssFeedUrl)
  .then(response =&gt; {
    const parser = new Parser();
    return parser.parseString(response.data);
  })
  .then(feed =&gt; {
    const savedEntryUrls = readSavedEntries();
    const newEntries = feed.items.filter(item =&gt; !savedEntryUrls.includes(item.link));

    if (newEntries.length === 0) {
      console.log(&#39;No new entries found.&#39;);
      return;
    }

    const items = newEntries.map(item =&gt; ({
      link: item.link,
      pubDate: item.pubDate,
      content: item.content
    }));

    const jsonData = JSON.stringify([...items, ...readSavedEntries()], null, 2);

    fs.writeFile(jsonFilePath, jsonData, err =&gt; {
      if (err) {
        console.error(&#39;Error writing JSON file:&#39;, err);
        return;
      }
      console.log(`${newEntries.length} new entries saved to ${jsonFilePath}`);
    });
  })
  .catch(error =&gt; {
    console.error(&#39;Error fetching or parsing RSS feed:&#39;, error);
  });
{% endraw %}
</code></pre><p>This is then parsed into json (I just think it looks better) and stored in a cache file.</p>
<p>I can then query this for specific page urls using</p>
<pre tabindex="0"><code>{% raw %}
eleventyConfig.addFilter(&#39;searchContentForUrl&#39;, (mastodonData, currentPageUrl) =&gt; {
  // Load the JSON data
  const jsonData = JSON.parse(fs.readFileSync(&#39;./_cache/mastodon.json&#39;, &#39;utf8&#39;));
  
  // Iterate over entries and search for the current URL in content property
  for (const entry of jsonData) {
    if (entry.content.includes(currentPageUrl)) {
      return entry;
    }
  }
  
  return null; // Return null if URL is not found in any content property
});
{% endraw %}
</code></pre><p>And display thing on the post page using <code>{% raw %}{% set mastoContent = mastodon | searchContentForUrl(urlnohtml) %}{% endraw %}</code></p>
<p>I then show this with:</p>
<pre tabindex="0"><code>{% raw %}
&lt;a href=&#34;{{ mastoContent.link}}&#34;&gt;&lt;i class=&#34;fa-brands fa-mastodon&#34;&gt;&lt;/i&gt; Join the conversation on Mastodon
&lt;div&gt;{{ mastoContent.content | safe }}&lt;/div&gt;&lt;/a&gt;
{% endraw %}
</code></pre><h2 id="future-plans">Future Plans</h2>
<p>Like I said right at the start, I am a complete noob with front end and I am currently studying to improve things. I’d like to pull all the information once using the mastodon API, so I have access to replies_count, reblogs_count and favourites_count but that can wait for now.</p>
<p>This only shows on a few posts due to a change in URL but I am planning to pull in old data and show this too. All in all, I’m fairly happy with it for now considering it was cobbled together fairly quickly when I changed my mind on what I wanted to display. Any helpful recommendation will be happily received.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-18 08:22:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  18 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/16/doing-the-work.html"><h1 class="p-name">Doing The Work</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>For the last few weeks, I’ve fallen out with myself and the place I publish all of my things online. I don’t want to go <a href="https://gregmorris.co.uk/2024/02/12/missing-the-point">into the specifics</a>, but I <a href="https://gregmorris.co.uk/2024/01/23/at-what-point">turned back from the brink</a> not that long ago and don’t want to again. As such, I&rsquo;ve been learning to build my own static blog with 11ty. It’s slow-going, but that’s the point.</p>
<p>If I am honest with myself, hosting my blog and everything else with micro.blog is the easy way to do it, but making me find solutions for things forces me to readdress my desires. It is easy for me to point at things like micropub, webmentions and the like, but when I have to do work to implement them I have to be certain what I want to achieve.</p>
<p>Seems counterintuitive, doesn’t it? That was my initial reaction too, and there might be some conformation bias going on, but the more I thought about it, the more sense it makes. Out of the box, 11ty is powerful, but has a high barrier to entry. There are starter themes to clone and get you going, but to really take advantage of what it can do takes time and knowledge. Knowledge I barely have.</p>
<p>I managed to get a rudimentary CMS up and working, along with <a href="https://social.lol/@gr36/111922994348191948">permalinks working the way I want</a> to, but after a few hours of head scratching really in-depth features were lacking. Easy enough to just give up again, but these technical skill barriers are there to be solved. It made me think about how easy it is to yell for a feature on a platform, but when you have to build it yourself it’s a different story. The barrier prompts internal decisions that might never arrive.</p>
<p>It also made me laugh at some points where I have jumped into ‘new’ features without actually thinking about how they help and how useful they are. Ultimately, I’m willing to do the work to get the features I want, such as webmentions, but some are falling away. As I spoke about before, this is supplementing my current front end certificate, so it&rsquo;s win/win at the moment.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-16 00:00:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  16 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/13/falling-back-in.html"><h1 class="p-name">Falling Back In Love</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>It’s less than 24 hours until Valentine’s Day, but this post isn’t about my wife. Although she is great. It’s about the very real love I have for running again, and it’s all because I gave myself something that I couldn’t get out of.</p>
<p>A couple of years ago, I was in a bad way. Despite <a href="/2021/02/15/why-do-i.html">loving running</a> my whole life, health issues caused me to just about give up on it. First came <a href="/2020/05/18/getting-injured-was.html">an injury</a> that got me into cycling, and then the really big hitter <a href="/2022/10/06/morning-for-a.html">after my COVID-19 booster shot</a>. Since early 2022 I’ve been unable to run without it causing more issues with my health.</p>
<blockquote class="instagram-media" data-instgrm-permalink="https://www.instagram.com/reel/C3H2xDPo2ea/?utm_source=ig_embed&amp;utm_campaign=loading" data-instgrm-version="14" style=" background:#FFF; border:0; border-radius:3px; box-shadow:0 0 1px 0 rgba(0,0,0,0.5),0 1px 10px 0 rgba(0,0,0,0.15); margin: 1px; max-width:540px; min-width:326px; padding:0; width:99.375%; width:-webkit-calc(100% - 2px); width:calc(100% - 2px);"><div style="padding:16px;"> <a href="https://www.instagram.com/reel/C3H2xDPo2ea/?utm_source=ig_embed&amp;utm_campaign=loading" style=" background:#FFFFFF; line-height:0; padding:0 0; text-align:center; text-decoration:none; width:100%;" target="_blank"> <div style=" display: flex; flex-direction: row; align-items: center;"> <div style="background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 40px; margin-right: 14px; width: 40px;"></div> <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center;"> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 100px;"></div> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 60px;"></div></div></div><div style="padding: 19% 0;"></div> <div style="display:block; height:50px; margin:0 auto 12px; width:50px;"><svg width="50px" height="50px" viewBox="0 0 60 60" version="1.1" xmlns="https://www.w3.org/2000/svg" xmlns:xlink="https://www.w3.org/1999/xlink"><g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g transform="translate(-511.000000, -20.000000)" fill="#000000"><g><path d="M556.869,30.41 C554.814,30.41 553.148,32.076 553.148,34.131 C553.148,36.186 554.814,37.852 556.869,37.852 C558.924,37.852 560.59,36.186 560.59,34.131 C560.59,32.076 558.924,30.41 556.869,30.41 M541,60.657 C535.114,60.657 530.342,55.887 530.342,50 C530.342,44.114 535.114,39.342 541,39.342 C546.887,39.342 551.658,44.114 551.658,50 C551.658,55.887 546.887,60.657 541,60.657 M541,33.886 C532.1,33.886 524.886,41.1 524.886,50 C524.886,58.899 532.1,66.113 541,66.113 C549.9,66.113 557.115,58.899 557.115,50 C557.115,41.1 549.9,33.886 541,33.886 M565.378,62.101 C565.244,65.022 564.756,66.606 564.346,67.663 C563.803,69.06 563.154,70.057 562.106,71.106 C561.058,72.155 560.06,72.803 558.662,73.347 C557.607,73.757 556.021,74.244 553.102,74.378 C549.944,74.521 548.997,74.552 541,74.552 C533.003,74.552 532.056,74.521 528.898,74.378 C525.979,74.244 524.393,73.757 523.338,73.347 C521.94,72.803 520.942,72.155 519.894,71.106 C518.846,70.057 518.197,69.06 517.654,67.663 C517.244,66.606 516.755,65.022 516.623,62.101 C516.479,58.943 516.448,57.996 516.448,50 C516.448,42.003 516.479,41.056 516.623,37.899 C516.755,34.978 517.244,33.391 517.654,32.338 C518.197,30.938 518.846,29.942 519.894,28.894 C520.942,27.846 521.94,27.196 523.338,26.654 C524.393,26.244 525.979,25.756 528.898,25.623 C532.057,25.479 533.004,25.448 541,25.448 C548.997,25.448 549.943,25.479 553.102,25.623 C556.021,25.756 557.607,26.244 558.662,26.654 C560.06,27.196 561.058,27.846 562.106,28.894 C563.154,29.942 563.803,30.938 564.346,32.338 C564.756,33.391 565.244,34.978 565.378,37.899 C565.522,41.056 565.552,42.003 565.552,50 C565.552,57.996 565.522,58.943 565.378,62.101 M570.82,37.631 C570.674,34.438 570.167,32.258 569.425,30.349 C568.659,28.377 567.633,26.702 565.965,25.035 C564.297,23.368 562.623,22.342 560.652,21.575 C558.743,20.834 556.562,20.326 553.369,20.18 C550.169,20.033 549.148,20 541,20 C532.853,20 531.831,20.033 528.631,20.18 C525.438,20.326 523.257,20.834 521.349,21.575 C519.376,22.342 517.703,23.368 516.035,25.035 C514.368,26.702 513.342,28.377 512.574,30.349 C511.834,32.258 511.326,34.438 511.181,37.631 C511.035,40.831 511,41.851 511,50 C511,58.147 511.035,59.17 511.181,62.369 C511.326,65.562 511.834,67.743 512.574,69.651 C513.342,71.625 514.368,73.296 516.035,74.965 C517.703,76.634 519.376,77.658 521.349,78.425 C523.257,79.167 525.438,79.673 528.631,79.82 C531.831,79.965 532.853,80.001 541,80.001 C549.148,80.001 550.169,79.965 553.369,79.82 C556.562,79.673 558.743,79.167 560.652,78.425 C562.623,77.658 564.297,76.634 565.965,74.965 C567.633,73.296 568.659,71.625 569.425,69.651 C570.167,67.743 570.674,65.562 570.82,62.369 C570.966,59.17 571,58.147 571,50 C571,41.851 570.966,40.831 570.82,37.631"></path></g></g></g></svg></div><div style="padding-top: 8px;"> <div style=" color:#3897f0; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:550; line-height:18px;">View this post on Instagram</div></div><div style="padding: 12.5% 0;"></div> <div style="display: flex; flex-direction: row; margin-bottom: 14px; align-items: center;"><div> <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(0px) translateY(7px);"></div> <div style="background-color: #F4F4F4; height: 12.5px; transform: rotate(-45deg) translateX(3px) translateY(1px); width: 12.5px; flex-grow: 0; margin-right: 14px; margin-left: 2px;"></div> <div style="background-color: #F4F4F4; border-radius: 50%; height: 12.5px; width: 12.5px; transform: translateX(9px) translateY(-18px);"></div></div><div style="margin-left: 8px;"> <div style=" background-color: #F4F4F4; border-radius: 50%; flex-grow: 0; height: 20px; width: 20px;"></div> <div style=" width: 0; height: 0; border-top: 2px solid transparent; border-left: 6px solid #f4f4f4; border-bottom: 2px solid transparent; transform: translateX(16px) translateY(-4px) rotate(30deg)"></div></div><div style="margin-left: auto;"> <div style=" width: 0px; border-top: 8px solid #F4F4F4; border-right: 8px solid transparent; transform: translateY(16px);"></div> <div style=" background-color: #F4F4F4; flex-grow: 0; height: 12px; width: 16px; transform: translateY(-4px);"></div> <div style=" width: 0; height: 0; border-top: 8px solid #F4F4F4; border-left: 8px solid transparent; transform: translateY(-4px) translateX(8px);"></div></div></div> <div style="display: flex; flex-direction: column; flex-grow: 1; justify-content: center; margin-bottom: 24px;"> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; margin-bottom: 6px; width: 224px;"></div> <div style=" background-color: #F4F4F4; border-radius: 4px; flex-grow: 0; height: 14px; width: 144px;"></div></div></a><p style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; line-height:17px; margin-bottom:0; margin-top:8px; overflow:hidden; padding:8px 0 7px; text-align:center; text-overflow:ellipsis; white-space:nowrap;"><a href="https://www.instagram.com/reel/C3H2xDPo2ea/?utm_source=ig_embed&amp;utm_campaign=loading" style=" color:#c9c8cd; font-family:Arial,sans-serif; font-size:14px; font-style:normal; font-weight:normal; line-height:17px; text-decoration:none;" target="_blank">A post shared by James Lattanzio (@jlatt.fit)</a></p></div></blockquote> <script async src="//www.instagram.com/embed.js"></script>
<p>I got this stupid idea to enter London, like I have done every year, and was secretly happy when the decline email came. A few weeks later I had a call from Epilepsy Society offering me a place, and I couldn’t say now—and that has been my saviour. I’ve always been a <a href="/2021/03/09/i-did-it.html">grab the bull by the horns person</a>, and if you get some sponsorships for it before you’ve had time to think, it means you can’t back out.</p>
<p>So I <em>had</em> to get running. There was no choice but to run through the breathing issues and needing an inhaler. It started out crap, but slowly I began to feel myself again. I’ve fallen back into love with running again, and all because of charity work. It gave me a reason not to give up, to force myself to get better, and although I’m still not 100% I feel the best version I have been for years.</p>
<p>The calmness that running brings helps me in so many areas of my life, and I can’t believe I went without it for so long.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-13 00:00:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  13 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
            <li class="post">
  <div class="post-title">
    
      <a href="http://localhost:1313/2024/02/12/missing-the-point.html"><h1 class="p-name">Missing The Point</h1></a>
    
  </div>
  <section class="e-content post-body">
      <p>It seems my throwaway post about <a href="/2024/02/09/self-censoring.html">not publishing to my blog</a> gained some traction. Many people took it as it was intended, a commentary on it being too easy to reply and push it in front of my face, but many more people did not.</p>
<p>It’s a shame to see it used as some kind of signifier of privilege. Before I published, I did wonder if it would be yet another reason to ignite something beyond its intention—particularly on micro.blog. Absolutely, you can read into the post whatever you wish, but its intentions are surface level.</p>
<p>It does not arch back to privilege, nor is it any kind of commentary on political or racial issues. It’s just a blog post about me not publishing because I would rather not start <strong>yet another</strong> discussion on note-taking apps. I would have, were it not so easy for people to reply and make their feelings known directly to me on my blog post comments.</p>
<p>To see it extended to some kind of indicator of deep-rooted entitlement is annoying at best. Whilst I do think it’s important to think about the way your words could be taken, these kinds of issues are why I don’t publish most of my blog posts. I love a constructive discussion on my thoughts and ideas, there is nothing better than having them tested, but this is beyond that.</p>
<p>I would rather not reply. Nor do I want to give it time to think through the ideas posed in response. I think this may be the point that I give up because I can’t be doing with it. If you miss the point, that’s on me too, but reach out to me first, please.</p>

  </section>
  <div class="post_meta">
    <time datetime="2024-02-12 00:00:00 &#43;0000"><i class="fa-regular fa-calendar"></i>  12 Feb 2024</time>
    
    <div>
    
      <a href="/categories/essay"><i class="fa-solid fa-tag"></i>  Essay </a>
    
    </div>
    
  </div>
</li>


<span class="separator"><span class="divider"></span></span>

        
    
    
    </ul>
    </section>





<nav class="pagination" role="navigation">
    
		
			<a class="newer-posts" href="/page/14/">&larr; Newer Posts</a>
		
		<span class="page-number">Page 15 of 112</span>
		
			<a class="older-posts" href="/page/16/">Older Posts &rarr;</a>
		
	
</nav>




<section id="footer">
  Subscribe | 
  <a href="/feed.xml">RSS</a> | 
<a href="/feed.json">JSON</a> | 
  <a href="https://www.buymeacoffee.com/gregmorris">Support me</a>
  <div>❤️ made with love by me</div>
</section>



</body>
</html>
